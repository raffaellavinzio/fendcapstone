var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0),n.p,n.p,n.p;const a=()=>{const e=document.getElementById("city").value,t=document.getElementById("date").value,n=/^\d{4}([-])\d{2}\1\d{2}$/;let a=document.getElementById("destination-error"),r=document.getElementById("date-error");if(a.textContent="Please enter a city name ex. Rome, NewYork,..",r.textContent="Please enter a valid departing date in the format yyyy-mm-dd",""===e&&""===t||""===e&&!t.match(n)||""===e&&new Date(t)<new Date((new Date).toDateString()))a.classList.remove("hide"),r.classList.remove("hide");else if(""===e)a.classList.remove("hide"),r.classList.add("hide");else if(""!==t&&t.match(n))if(t instanceof Date||!isNaN(new Date(t))){if(!(new Date(t)<new Date((new Date).toDateString())))return a.classList.add("hide"),r.classList.add("hide"),[e,t];r.classList.remove("hide"),a.classList.add("hide")}else r.classList.remove("hide"),a.classList.add("hide");else r.classList.remove("hide"),a.classList.add("hide")},r=async(e,t)=>{try{const n=await fetch(e);return t(await n.json())}catch(e){console.log(e)}},o=e=>{let t=document.getElementById("destination-error");if(t.textContent="Please enter a valid city name ex. Rome, New York,..",t.classList.add("hide"),e.totalResultsCount>0){return{country:e.geonames[0].countryName,lat:e.geonames[0].lat,long:e.geonames[0].lng}}throw t.classList.remove("hide"),new Error("invalid city name entered")},i=e=>{let t={};return 0!==e.forecast.daily.data.length&&e.forecast.daily.data[0].hasOwnProperty("icon")&&e.forecast.daily.data[0].hasOwnProperty("temperatureHigh")&&e.forecast.daily.data[0].hasOwnProperty("temperatureLow")&&(t={high:e.forecast.daily.data[0].temperatureHigh,low:e.forecast.daily.data[0].temperatureLow,icon:e.forecast.daily.data[0].icon}),!e.forecast.daily.data[0].hasOwnProperty("icon")&&e.forecast.daily.data[0].hasOwnProperty("temperatureHigh")&&e.forecast.daily.data[0].hasOwnProperty("temperatureLow")&&(t={high:e.forecast.daily.data[0].temperatureHigh,low:e.forecast.daily.data[0].temperatureLow}),void 0!==e.alerts.alerts&&(t.alertTitle=e.alerts.alerts[0].title,t.alertUri=e.alerts.alerts[0].uri),t},d=e=>{if(parseInt(e.totalHits)>0){let t=Math.floor(Math.random()*e.hits.length);return e.hits[t].webformatURL}return"undefined"},l=()=>{localStorage.clear(),s()},s=()=>{let e;const t=new Skycons({color:"pink"});t.add(document.getElementById("icon-logo"),"PARTLY_CLOUDY_DAY"),t.play();let n=document.getElementById("destination-error"),a=document.getElementById("date-error");n.classList.add("hide"),a.classList.add("hide"),document.querySelector("form").reset(),null===localStorage.getItem("items")?(e=[],document.querySelector(".trip__picture").src="https://cdn.pixabay.com/photo/2017/06/17/18/35/background-2413081_1280.jpg",document.querySelector(".trip__info").innerHTML="",document.getElementById("icon").classList.add("hide"),document.getElementById("text").textContent="",document.getElementById("temperature").textContent="",document.getElementById("alert").innerHTML=""):(e=JSON.parse(localStorage.getItem("items")),document.getElementById("city").value=e[0],document.getElementById("date").value=e[1],u(...e))},c=(e,t,n)=>{const a=document.querySelector(".trip__info");let r=Math.round((new Date(t).getTime()-(new Date).getTime())/864e5);r<0&&(r=0),a.innerHTML=`Your trip to <span class="capitalize">${e}</span>, ${n} is ${r} days away`},u=(e,t,n,a,r)=>{c(e,t,n),document.querySelector(".trip__picture").src=r;const o=new Skycons({color:"#177575"});a.hasOwnProperty("icon")?(document.getElementById("icon").classList.remove("hide"),o.add(document.getElementById("icon"),a.icon),o.play(),document.getElementById("text").textContent=a.icon.split("-").join(" ")):(document.getElementById("icon").classList.add("hide"),document.getElementById("text").textContent="sorry, no data"),a.hasOwnProperty("high")&&a.hasOwnProperty("low")?(document.getElementById("temperature").innerHTML=`High ${a.high} F<br>Low ${a.low} F`,a.alertTitle?document.getElementById("alert").innerHTML=`<a href=${a.alertUri}>${a.alertTitle}</a>`:document.getElementById("alert").innerHTML="<span>No meteo alerts this upcoming week</span>"):"sorry, no data"!==document.getElementById("text").textContent?document.getElementById("temperature").textContent="SORRY, NO DATA":document.getElementById("temperature").textContent=""};window.addEventListener("DOMContentLoaded",e=>{s(),document.getElementById("submit").addEventListener("click",m),document.getElementById("clear").addEventListener("click",l)});const m=async e=>{e.preventDefault();try{const[e,t]=a();if([e,t]!==["undefined","undefined"]){let n=await r(`/geonamesapi/${e}`,o);if(void 0!==n){const a=parseInt((new Date(t).getTime()/1e3).toFixed(0)),o=await r(`/darkskyapi/${n.lat}/${n.long}/${a}`,i);let l=await r(`/pixabayapi/${e}`,d);"undefined"===l&&(l=await r(`/pixabayapi/${n.country}`,d)),u(e,t,n.country,o,l);let s=[e,t,n.country,o,l];localStorage.setItem("items",JSON.stringify(s))}}}catch(e){console.log(e)}};n.d(t,"parseGeonamesData",(function(){return o})),n.d(t,"parseDarkSkyData",(function(){return i})),n.d(t,"parsePixabayData",(function(){return d})),n.d(t,"getApiData",(function(){return r})),n.d(t,"validateForm",(function(){return a})),n.d(t,"updateDaysCounter",(function(){return c})),n.d(t,"updateResults",(function(){return u})),n.d(t,"init",(function(){return s})),n.d(t,"clear",(function(){return l}))}]);